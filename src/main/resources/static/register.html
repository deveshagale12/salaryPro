<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Register | SalaryPro</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>



    <style>

        body {

            background: linear-gradient(135deg, #f8f9fd 0%, #e9ecef 100%);

            font-family: 'Inter', sans-serif;

            min-height: 100vh;

            display: flex;

            align-items: center;

            padding: 20px 0;

        }

        .register-card {

            border: none;

            border-radius: 24px;

            box-shadow: 0 20px 40px rgba(0,0,0,0.08);

            background: white;

            transition: all 0.3s ease;

        }

        .brand-logo { font-weight: 800; letter-spacing: -1px; }

        .form-control, .form-select {

            border-radius: 12px;

            padding: 12px;

            border: 1px solid #e0e6ed;

            background-color: #fbfcfe;

        }

        .form-control:focus {

            box-shadow: 0 0 0 4px rgba(67, 97, 238, 0.1);

            border-color: #4361ee;

        }

        .input-group-text {

            border-radius: 12px 0 0 12px;

            background: #fbfcfe;

            border-right: none;

            color: #6c757d;

        }

        .has-icon { border-left: none; }

        .btn-register {

            padding: 14px;

            border-radius: 12px;

            font-weight: 600;

            background: #4361ee;

            border: none;

            transition: all 0.3s ease;

        }

        .btn-register:hover {

            background: #3f37c9;

            transform: translateY(-2px);

            box-shadow: 0 8px 15px rgba(67, 97, 238, 0.2);

        }

        /* Responsive adjustments */

        @media (max-width: 576px) {

            .register-card { border-radius: 15px; padding: 1.5rem !important; }

            .brand-logo { font-size: 1.5rem; }

        }

    </style>

</head>

<body>



    <div class="container">

        <div class="card register-card mx-auto p-4 p-md-5" style="max-width: 500px;">

            <div class="card-body">

                <div class="text-center mb-4">

                    <h2 class="brand-logo text-dark mb-1">SALARY<span class="text-primary">PRO</span></h2>

                    <p class="text-muted small">Join us today! Create your secure account.</p>

                </div>

                

                <form id="regForm">

                    <div class="mb-3">

                        <label class="form-label small fw-bold text-muted">Full Name</label>

                        <div class="input-group">

                            <span class="input-group-text"><i class="bi bi-person"></i></span>

                            <input type="text" id="name" class="form-control has-icon" placeholder="John Doe" required>

                        </div>

                    </div>



                    <div class="mb-3">

                        <label class="form-label small fw-bold text-muted">Email Address</label>

                        <div class="input-group">

                            <span class="input-group-text"><i class="bi bi-envelope"></i></span>

                            <input type="email" id="email" class="form-control has-icon" placeholder="name@company.com" required>

                        </div>

                    </div>



                    <div class="mb-3">

                        <label class="form-label small fw-bold text-muted">Mobile Number</label>

                        <div class="input-group">

                            <span class="input-group-text"><i class="bi bi-phone"></i></span>

                            <input type="tel" id="mobile" class="form-control has-icon" placeholder="9876543210" pattern="[0-9]{10}" required>

                        </div>

                    </div>



                    <div class="mb-3">

                        <label class="form-label small fw-bold text-muted">Password</label>

                        <div class="input-group">

                            <span class="input-group-text"><i class="bi bi-shield-lock"></i></span>

                            <input type="password" id="password" class="form-control has-icon" placeholder="••••••••" required>

                        </div>

                    </div>



                    <div class="mb-4">

                        <label class="form-label small fw-bold text-muted">Select Role</label>

                        <div class="input-group">

                            <span class="input-group-text"><i class="bi bi-people"></i></span>

                            <select id="role" class="form-select has-icon">

                                <option value="USER" selected>Employee (User)</option>

                                <option value="ADMIN">Administrator (Admin)</option>

                            </select>

                        </div>

                    </div>



                    <button type="submit" id="regBtn" class="btn btn-primary btn-register w-100 shadow-sm">

                        Register Now

                    </button>

                    

                    <p class="text-center mt-4 small text-muted">

                        Already have an account? <a href="user-login.html" class="text-primary fw-bold text-decoration-none">Login Here</a>

                    </p>

                </form>

            </div>

        </div>

    </div>



    



    <script>

        document.getElementById('regForm').onsubmit = async (e) => {

            e.preventDefault();

            const btn = document.getElementById('regBtn');

            

            // Show loading state

            btn.disabled = true;

            btn.innerHTML = `<span class="spinner-border spinner-border-sm me-2"></span>Processing...`;

            

            const userData = {

                name: document.getElementById('name').value,

                email: document.getElementById('email').value,

                mobile: document.getElementById('mobile').value,

                password: document.getElementById('password').value,

                role: document.getElementById('role').value

            };



            try {

                const res = await fetch('/api/users/register', {

                    method: 'POST',

                    headers: {'Content-Type': 'application/json'},

                    body: JSON.stringify(userData)

                });



                if(res.ok) {

                    // Success Popup

                    Swal.fire({

                        icon: 'success',

                        title: 'Registration Successful!',

                        text: 'Welcome to SalaryPro. Redirecting to login...',

                        timer: 2500,

                        showConfirmButton: false,

                        background: '#ffffff',

                        iconColor: '#4361ee',

                        timerProgressBar: true

                    }).then(() => {

                        window.location.href = 'login.html';

                    });

                } else {

                    const errorMsg = await res.text();

                    Swal.fire({

                        icon: 'error',

                        title: 'Registration Failed',

                        text: errorMsg || 'Something went wrong.',

                        confirmButtonColor: '#4361ee'

                    });

                    btn.disabled = false;

                    btn.innerText = "Register Now";

                }

            } catch (err) {

                Swal.fire({

                    icon: 'warning',

                    title: 'Server Error',

                    text: 'Cannot connect to the backend. Please ensure the server is running.',

                    confirmButtonColor: '#4361ee'

                });

                btn.disabled = false;

                btn.innerText = "Register Now";

            }

        };

    </script>

</body>

</html>